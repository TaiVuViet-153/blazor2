<div class="">
    <p>@prod.Id</p>
    <p>@prod.Name</p>
    <p>@prod.Price</p>

</div>

@code {
    [Parameter]
    public ProductApiVM prod { get; set; }

    [Parameter]
    [SupplyParameterFromQuery]
    public string content { get; set; } = "";

    // chạy sau khi component nhận tham số từ component cha
    protected override void OnParametersSet() {
        if (prod != null) {
            Console.WriteLine("Hàm chạy sau khi nhận tham số từ component cha");
            Console.WriteLine(prod.Price); 
        }

        Console.WriteLine(content);
    }

    // chạy trước khi component nhận tham số từ component cha
    public override async Task SetParametersAsync(ParameterView parameters) {
        // ParameterView là tất cả các tham số của component này nhận được
        // lấy ra tham số prod
        var pro_param = parameters.GetValueOrDefault<ProductApiVM>("prod");
        
        if (pro_param != null) {
            // lấy ra giá và update lại giá
            Int128 oldPrice = Int128.Parse(pro_param.Price)/2;
            pro_param.Price = oldPrice.ToString();
        }

        // gọi hàm base để vòng đời component được chạy tiếp
        await base.SetParametersAsync(parameters);
    }
    

    
}



@* 
- SetParametersAsync: hàm chạy trước khi component nhận được tham số từ component cha
    Can thiệp vào tham số
- OnParametersSet: hàm chạy sau khi component nhận tham số từ component cha
    Không can thiệp được tham số. Chỉ có dùng để xử lý logic code

*@

