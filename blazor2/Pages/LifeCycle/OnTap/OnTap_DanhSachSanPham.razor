@page "/san-pham"
@using System.Net.Http.Json
@inject HttpClient _http

@* 
    giao diện hiển thị ds sản phẩm
    mỗi sản phẩm sẽ có 1 nút mua hàng

    code:
    gọi api lấy ds sp
    https://svcy.myclass.vn/api/ProductApi/getall

    component màu đỏ là DanhSachSanPham
    màu tím là SanPhamItem
*@

<div class="container">
    <h3>Danh sách sản phẩm</h3>
    <div class="row">
        @*  duyệt mảng ds sp để render ra  *@
        @foreach (var item in ls)
        {
            <OnTap_SanPhamItem prod="@item" />
        }
    </div>
</div>

@code {
    List<ProductApiVM> ls = new List<ProductApiVM>();

    public async Task LoadData() {
        List<ProductApiVM> data = await _http.GetFromJsonAsync<List<ProductApiVM>>("https://svcy.myclass.vn/api/ProductApi/getall");

        ls = data;
    }

    protected async override Task OnInitializedAsync()
    {
        await LoadData();
    }
 }